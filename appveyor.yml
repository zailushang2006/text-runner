environment:
  nodejs_version: "8"

# cache:
  # - node_modules

init:
  - git config --global core.autocrlf true
  - copy c:\MinGW\bin\mingw32-make.exe c:\MinGW\bin\make.exe

install:
  - ps: Install-Product node $env:nodejs_version
  - node --version
  - npm --version
  - npm install --loglevel error --depth 0
  - set PATH=%APPDATA%\npm;c:\MinGW\bin;%PATH%

test_script:
  - node_modules\.bin\babel src -d dist -q
  - node_modules\.bin\mocha --reporter dot "src/**/*-test.js"
  - node_modules\.bin\cucumber-js --tags "(not @todo) and (not @skipWindows)" --format progress
  - bin\text-run --offline


# Don't double-build PRs
skip_branch_with_pr: true

build: off
